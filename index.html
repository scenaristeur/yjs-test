<script type="module">
  import * as Y from "https://cdn.jsdelivr.net/npm/yjs@13.6.14/+esm";
  import { WebsocketProvider } from "https://cdn.jsdelivr.net/npm/y-websocket@2.0.0/+esm";

  const doc = new Y.Doc();
  const wsProvider = new WebsocketProvider(
    "ws://localhost:1234",
    "my-roomname",
    doc
  );

  wsProvider.on("status", (event) => {
    // logs "connected" or "disconnected"
    console.log(event.status);
  });

  const yarray = doc.getArray("my-array");
  yarray.observe((event) => {
    console.log("yarray was modified");
  });
  // every time a local or remote client modifies yarray, the observer is called
  yarray.insert(0, ["val"]); // => "yarray was modified"
</script>
